/**
 * Global Responsive Styles for LibraTrack
 * Ensures all pages work seamlessly across mobile, tablet, and desktop devices
 */

/* ============================================
   RESPONSIVE BREAKPOINTS
   ============================================ */
/* Mobile: < 576px (default) */
/* Tablet: 576px - 991px */
/* Desktop: 992px+ */

/* ============================================
   GLOBAL RESPONSIVE UTILITIES
   ============================================ */

/* Container padding adjustments */
@media (max-width: 575.98px) {
  .container-fluid {
    padding-left: 12px !important;
    padding-right: 12px !important;
  }
  
  main.container-fluid {
    padding: 16px 12px !important;
  }
}

@media (min-width: 576px) and (max-width: 991.98px) {
  .container-fluid {
    padding-left: 20px !important;
    padding-right: 20px !important;
  }
  
  main.container-fluid {
    padding: 20px !important;
  }
}

/* ============================================
   SIDEBAR RESPONSIVE ENHANCEMENTS
   ============================================ */

@media (max-width: 991.98px) {
  /* Mobile sidebar overlay */
  .sb-sidebar {
    width: 280px !important;
    z-index: 1050;
    box-shadow: 4px 0 20px rgba(0,0,0,0.3);
  }
  
  /* Backdrop when sidebar is open */
  .sb-toggled::before {
    content: '';
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    z-index: 1040;
    animation: fadeIn 0.2s ease;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  /* Expanded state on mobile */
  .sb-expanded .sb-sidebar {
    width: 280px !important;
  }
  
  .sb-expanded .sb-text,
  .sb-expanded .sb-label {
    display: inline !important;
  }
}

/* ============================================
   HEADER & NAVIGATION RESPONSIVE
   ============================================ */

/* Remove horizontal padding from topbar container - completely edge-to-edge, no spaces */
.sb-topbar .container-fluid,
.admin-header-gold .container-fluid {
  padding-left: 0 !important;
  padding-right: 0 !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
}

/* Add minimal padding to first button and last element for readability */
.sb-topbar .container-fluid > button:first-child,
.admin-header-gold .container-fluid > button:first-child {
  margin-left: 16px !important;
}

.sb-topbar .container-fluid > *:last-child,
.admin-header-gold .container-fluid > *:last-child {
  margin-right: 16px !important;
}

@media (max-width: 991.98px) {
  /* Top header adjustments */
  .admin-header-gold,
  .sb-topbar {
    padding: 8px 12px !important;
  }
  
  /* Keep no horizontal padding on container-fluid inside topbar */
  .sb-topbar .container-fluid,
  .admin-header-gold .container-fluid {
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
  
  /* Hide search on very small screens */
  @media (max-width: 575.98px) {
    .d-none.d-md-flex {
      display: none !important;
    }
    
    .search-bar-custom {
      max-width: 100% !important;
    }
  }
  
  /* Notification and avatar buttons */
  .notification-btn,
  .admin-btn-custom {
    width: 40px !important;
    height: 40px !important;
  }
  
  /* Page title */
  .fw-bold.h5 {
    font-size: 1.1rem !important;
  }
}

/* ============================================
   TABLES RESPONSIVE
   ============================================ */

@media (max-width: 991.98px) {
  /* Make tables scrollable horizontally */
  .table-responsive {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Stack table cells on mobile */
  @media (max-width: 767.98px) {
    .table-modern {
      font-size: 0.875rem;
    }
    
    .table-modern th,
    .table-modern td {
      padding: 8px 6px !important;
      white-space: nowrap;
    }
    
    /* Hide less important columns on mobile */
    .table-modern th:nth-child(n+5),
    .table-modern td:nth-child(n+5) {
      display: none;
    }
    
    /* Show important columns */
    .table-modern th:first-child,
    .table-modern td:first-child,
    .table-modern th:nth-child(2),
    .table-modern td:nth-child(2),
    .table-modern th:nth-child(3),
    .table-modern td:nth-child(3),
    .table-modern th:last-child,
    .table-modern td:last-child {
      display: table-cell;
    }
  }
  
  /* Very small screens - card view for tables */
  @media (max-width: 575.98px) {
    .table-card {
      border-radius: 12px;
      overflow: hidden;
    }
    
    .table-modern {
      font-size: 0.8125rem;
    }
    
    .table-modern th,
    .table-modern td {
      padding: 6px 4px !important;
    }
  }
}

/* ============================================
   CARDS & STAT CARDS RESPONSIVE
   ============================================ */

@media (max-width: 991.98px) {
  /* Stat cards - stack on tablet */
  .row.g-3 > [class*="col-"],
  .row.g-4 > [class*="col-"] {
    margin-bottom: 16px;
  }
  
  @media (max-width: 767.98px) {
    /* Stat cards full width on mobile */
    .sb-card,
    .od-card {
      width: 100% !important;
      margin-bottom: 12px;
    }
    
    /* Card padding adjustments */
    .card-body {
      padding: 16px !important;
    }
    
    .card-header {
      padding: 12px 16px !important;
    }
  }
}

/* ============================================
   FORMS RESPONSIVE
   ============================================ */

@media (max-width: 991.98px) {
  /* Form sections stack */
  .row.g-3 > [class*="col-"],
  .row.g-4 > [class*="col-"],
  .row.g-5 > [class*="col-"] {
    flex: 0 0 100%;
    max-width: 100%;
  }
  
  /* Form controls */
  .form-control,
  .form-select {
    font-size: 16px !important; /* Prevents zoom on iOS */
  }
  
  /* Filter sections */
  .filter-section {
    margin-bottom: 16px;
  }
  
  .filter-section .row > [class*="col-"] {
    margin-bottom: 12px;
  }
  
  /* Button groups */
  .d-flex.gap-2 {
    flex-wrap: wrap;
    gap: 8px !important;
  }
  
  .d-flex.gap-2 .btn {
    flex: 1 1 auto;
    min-width: 120px;
  }
}

@media (max-width: 575.98px) {
  /* Full width buttons on mobile */
  .btn-group,
  .d-flex.gap-2 {
    width: 100%;
  }
  
  .d-flex.gap-2 .btn {
    width: 100%;
    margin-bottom: 8px;
  }
  
  /* Form labels */
  .form-label {
    font-size: 0.875rem;
    margin-bottom: 6px;
  }
}

/* ============================================
   MODALS RESPONSIVE
   ============================================ */

@media (max-width: 991.98px) {
  .modal-dialog {
    margin: 10px;
    max-width: calc(100% - 20px);
  }
  
  .modal-content {
    border-radius: 12px;
  }
  
  .modal-header,
  .modal-body,
  .modal-footer {
    padding: 16px !important;
  }
  
  .modal-title {
    font-size: 1.1rem !important;
  }
}

@media (max-width: 575.98px) {
  .modal-dialog {
    margin: 0;
    max-width: 100%;
    height: 100%;
  }
  
  .modal-content {
    border-radius: 0;
    height: 100%;
    display: flex;
    flex-direction: column;
  }
  
  .modal-body {
    flex: 1;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Full width buttons in modals */
  .modal-footer .btn {
    flex: 1;
    margin: 0 4px;
  }
}

/* ============================================
   BOOK GRID RESPONSIVE
   ============================================ */

@media (max-width: 1199.98px) {
  .book-grid {
    gap: 16px;
  }
  
  .grid-item {
    width: calc(25% - 12px);
    min-width: calc(25% - 12px);
  }
}

@media (max-width: 991.98px) {
  .grid-item {
    width: calc(33.333% - 11px);
    min-width: calc(33.333% - 11px);
  }
  
  .book-card,
  .rec-card {
    width: 100%;
  }
}

@media (max-width: 767.98px) {
  .grid-item {
    width: calc(50% - 8px);
    min-width: calc(50% - 8px);
  }
  
  .h-scroll {
    gap: 12px;
    padding-bottom: 4px;
  }
  
  .rec-card,
  .book-card {
    min-width: 160px;
  }
}

@media (max-width: 575.98px) {
  .grid-item {
    width: 100%;
    min-width: 100%;
  }
  
  .book-grid {
    gap: 12px;
  }
  
  /* Category chips scroll horizontally */
  .chips-container {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 8px;
    flex-wrap: nowrap;
  }
  
  .chip {
    flex-shrink: 0;
    white-space: nowrap;
  }
}

/* ============================================
   PAGINATION RESPONSIVE
   ============================================ */

@media (max-width: 575.98px) {
  .pagination {
    flex-wrap: wrap;
    justify-content: center;
    gap: 4px;
  }
  
  .pagination .page-link {
    padding: 6px 10px;
    font-size: 0.875rem;
  }
  
  /* Hide page numbers, show only prev/next */
  .pagination .page-item:not(.disabled):not(:first-child):not(:last-child) {
    display: none;
  }
}

/* ============================================
   DASHBOARD RESPONSIVE
   ============================================ */

@media (max-width: 991.98px) {
  /* Dashboard cards stack */
  .dashboard-card {
    margin-bottom: 16px;
  }
  
  /* Shortcuts bar */
  .qa-bar {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }
  
  .qa-bar > * {
    width: 100%;
  }
}

@media (max-width: 575.98px) {
  /* Dashboard stats */
  .stat-card {
    margin-bottom: 12px;
  }
  
  /* Section titles */
  .section-title {
    font-size: 1.1rem;
  }
}

/* ============================================
   PROFILE PAGES RESPONSIVE
   ============================================ */

@media (max-width: 991.98px) {
  .profile-header {
    flex-direction: column;
    text-align: center;
  }
  
  .profile-avatar {
    margin-bottom: 16px;
  }
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

/* Hide on mobile */
@media (max-width: 575.98px) {
  .hide-mobile {
    display: none !important;
  }
}

/* Hide on tablet and below */
@media (max-width: 991.98px) {
  .hide-tablet {
    display: none !important;
  }
}

/* Show only on mobile */
@media (min-width: 576px) {
  .show-mobile-only {
    display: none !important;
  }
}

/* Show only on tablet and below */
@media (min-width: 992px) {
  .show-mobile-tablet {
    display: none !important;
  }
}

/* ============================================
   TOUCH FRIENDLY ELEMENTS
   ============================================ */

@media (max-width: 991.98px) {
  /* Increase touch targets */
  .btn,
  .sb-link,
  .chip,
  .page-link {
    min-height: 44px;
    min-width: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  
  /* Icon buttons */
  .icon-btn,
  .btn-fav {
    min-width: 44px;
    min-height: 44px;
  }
}

/* ============================================
   HISTORY PAGES RESPONSIVE
   ============================================ */

@media (max-width: 991.98px) {
  /* Filter sections stack on tablet */
  .filter-section .row > [class*="col-"] {
    margin-bottom: 12px;
  }
  
  /* History table adjustments */
  .history-table {
    font-size: 0.875rem;
  }
}

@media (max-width: 767.98px) {
  /* Filter section full width on mobile */
  .filter-section {
    padding: 12px 16px !important;
  }
  
  .filter-section .row {
    margin: 0;
  }
  
  .filter-section .row > [class*="col-"] {
    padding: 0;
    margin-bottom: 12px;
  }
  
  /* Status badges smaller on mobile */
  .pill,
  .badge {
    font-size: 0.75rem;
    padding: 4px 8px;
  }
}

@media (max-width: 575.98px) {
  /* Compact filter layout */
  .filter-section .form-label {
    font-size: 0.8125rem;
    margin-bottom: 4px;
  }
  
  .filter-section .form-control,
  .filter-section .form-select {
    font-size: 14px;
    padding: 8px 12px;
  }
  
  /* Hide less important info on mobile */
  .text-muted.small {
    font-size: 0.75rem;
  }
}

/* ============================================
   BOOKS PAGE RESPONSIVE
   ============================================ */

@media (max-width: 991.98px) {
  /* Book cards adjust */
  .book-card {
    min-width: 200px;
  }
  
  /* Search and filter bar */
  .search-filter-bar {
    flex-direction: column;
    gap: 12px;
  }
}

@media (max-width: 767.98px) {
  /* Category chips horizontal scroll */
  .category-chips {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    flex-wrap: nowrap;
    padding-bottom: 8px;
  }
  
  .category-chip {
    flex-shrink: 0;
  }
}

@media (max-width: 575.98px) {
  /* Book grid single column */
  .book-grid .grid-item {
    width: 100% !important;
  }
  
  /* Search bar full width */
  .search-bar-custom {
    width: 100%;
    max-width: 100%;
  }
}

/* ============================================
   LIBRARIAN PAGES RESPONSIVE
   ============================================ */

@media (max-width: 991.98px) {
  /* Borrow requests table */
  .borrow-requests-table th:nth-child(n+4),
  .borrow-requests-table td:nth-child(n+4) {
    display: none;
  }
  
  /* Active loans adjustments */
  .loan-card {
    margin-bottom: 16px;
  }
}

@media (max-width: 767.98px) {
  /* Action buttons stack */
  .action-buttons {
    flex-direction: column;
    width: 100%;
  }
  
  .action-buttons .btn {
    width: 100%;
    margin-bottom: 8px;
  }
  
  /* User cards in librarian pages */
  .user-card {
    margin-bottom: 12px;
  }
}

/* ============================================
   ADMIN PAGES RESPONSIVE
   ============================================ */

@media (max-width: 991.98px) {
  /* Admin dashboard cards */
  .admin-card {
    margin-bottom: 16px;
  }
  
  /* Settings form */
  .settings-form .row > [class*="col-"] {
    margin-bottom: 16px;
  }
}

@media (max-width: 575.98px) {
  /* Admin tables compact */
  .admin-table {
    font-size: 0.8125rem;
  }
  
  /* Settings sections */
  .settings-section {
    padding: 16px 12px;
  }
}

/* ============================================
   PROFILE PAGES RESPONSIVE
   ============================================ */

@media (max-width: 991.98px) {
  .profile-container {
    flex-direction: column;
  }
  
  .profile-sidebar {
    width: 100%;
    margin-bottom: 24px;
  }
  
  .profile-content {
    width: 100%;
  }
}

@media (max-width: 575.98px) {
  .profile-avatar {
    width: 100px;
    height: 100px;
  }
  
  .profile-info {
    padding: 16px;
  }
}

/* ============================================
   NOTIFICATION PAGES RESPONSIVE
   ============================================ */

@media (max-width: 767.98px) {
  .notification-item {
    padding: 12px !important;
  }
  
  .notification-item .badge {
    font-size: 0.75rem;
    padding: 4px 8px;
  }
}

/* ============================================
   FORM PAGES RESPONSIVE ENHANCEMENTS
   ============================================ */

@media (max-width: 991.98px) {
  /* Form groups stack */
  .form-group,
  .mb-3,
  .mb-4 {
    margin-bottom: 16px !important;
  }
  
  /* Input groups */
  .input-group {
    flex-wrap: wrap;
  }
  
  .input-group > .form-control {
    width: 100%;
    margin-bottom: 8px;
  }
}

@media (max-width: 575.98px) {
  /* Form sections */
  .form-section {
    padding: 16px 12px;
  }
  
  /* File upload areas */
  .file-upload-area {
    padding: 24px 16px;
  }
  
  /* Image preview */
  .image-preview {
    max-width: 100%;
    height: auto;
  }
}

/* ============================================
   DROPDOWN MENUS RESPONSIVE
   ============================================ */

@media (max-width: 575.98px) {
  .dropdown-menu {
    max-width: calc(100vw - 32px);
    left: 16px !important;
    right: 16px !important;
    width: auto !important;
  }
  
  .dropdown-menu-end {
    left: 16px !important;
    right: 16px !important;
  }
}

/* ============================================
   ALERTS & BANNERS RESPONSIVE
   ============================================ */

@media (max-width: 575.98px) {
  .alert {
    padding: 12px 16px;
    font-size: 0.875rem;
  }
  
  .alert-dismissible .btn-close {
    padding: 0.5rem 0.5rem;
  }
}

/* ============================================
   LOADING STATES RESPONSIVE
   ============================================ */

@media (max-width: 575.98px) {
  .skeleton {
    height: 16px;
  }
  
  .skeleton-table-cell {
    height: 40px;
  }
}

/* ============================================
   UTILITY ENHANCEMENTS
   ============================================ */

/* Smooth scrolling on mobile */
@media (max-width: 991.98px) {
  html {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }
  
  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* Prevent text size adjustment on iOS */
@media (max-width: 991.98px) {
  input,
  select,
  textarea {
    font-size: 16px !important;
  }
}

/* ============================================
   ADDITIONAL RESPONSIVE FIXES
   ============================================ */

/* Fix for history pages topbar spacing */
@media (max-width: 991.98px) {
  .sb-topbar.sticky-top {
    position: sticky !important;
    top: 0 !important;
  }
  
  main.container-fluid {
    padding-top: 16px !important;
  }
}

/* Fix for filter sections on mobile */
@media (max-width: 575.98px) {
  .filter-section .row.g-3 > [class*="col-"],
  .filter-section .row.g-4 > [class*="col-"] {
    flex: 0 0 100%;
    max-width: 100%;
    margin-bottom: 12px;
  }
  
  /* Date picker inputs full width */
  .filter-section input[type="date"],
  .filter-section input[type="text"] {
    width: 100%;
  }
}

/* Fix for action button groups */
@media (max-width: 767.98px) {
  .btn-group-vertical,
  .d-flex.gap-2 {
    width: 100%;
  }
  
  .btn-group-vertical .btn,
  .d-flex.gap-2 .btn {
    width: 100%;
    margin-bottom: 8px;
  }
}

/* Fix for card headers on mobile */
@media (max-width: 575.98px) {
  .card-header {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }
  
  .card-header .btn {
    width: 100%;
  }
}

/* Fix for search bars */
@media (max-width: 767.98px) {
  .search-bar-custom {
    width: 100%;
    max-width: 100%;
  }
  
  .search-bar-custom .form-control {
    font-size: 16px; /* Prevent zoom on iOS */
  }
}

/* Fix for notification lists */
@media (max-width: 575.98px) {
  .list-group-item {
    padding: 12px 16px !important;
    flex-direction: column;
    align-items: flex-start;
  }
  
  .list-group-item .badge {
    margin-top: 8px;
    align-self: flex-start;
  }
}

/* Fix for empty states */
@media (max-width: 575.98px) {
  .empty-state {
    padding: 32px 16px;
  }
  
  .empty-state i {
    font-size: 3rem;
  }
  
  .empty-state h5 {
    font-size: 1.1rem;
  }
}

/* Fix for pagination on mobile */
@media (max-width: 575.98px) {
  .pagination-wrapper {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  .pagination {
    min-width: max-content;
  }
}

/* Fix for modals on very small screens */
@media (max-width: 400px) {
  .modal-dialog {
    margin: 0;
    max-width: 100%;
    height: 100vh;
  }
  
  .modal-content {
    border-radius: 0;
    min-height: 100vh;
  }
}

/* Fix for image upload areas */
@media (max-width: 575.98px) {
  .img-drop,
  .image-upload-area {
    min-height: 200px;
    padding: 24px 16px;
  }
  
  .img-preview {
    max-width: 100%;
    height: auto;
  }
}

/* Fix for stat cards grid */
@media (max-width: 991.98px) {
  .row.g-3 > [class*="col-6"],
  .row.g-3 > [class*="col-md-3"],
  .row.g-3 > [class*="col-md-4"] {
    flex: 0 0 50%;
    max-width: 50%;
  }
}

@media (max-width: 575.98px) {
  .row.g-3 > [class*="col-6"],
  .row.g-3 > [class*="col-md-3"],
  .row.g-3 > [class*="col-md-4"] {
    flex: 0 0 100%;
    max-width: 100%;
  }
}

/* Fix for horizontal scroll containers */
@media (max-width: 991.98px) {
  .h-scroll,
  .horizontal-scroll {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    padding-bottom: 8px;
  }
  
  .h-scroll::-webkit-scrollbar,
  .horizontal-scroll::-webkit-scrollbar {
    height: 6px;
  }
  
  .h-scroll::-webkit-scrollbar-thumb,
  .horizontal-scroll::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 3px;
  }
}

/* Fix for tooltips and popovers on mobile */
@media (max-width: 575.98px) {
  .tooltip,
  .popover {
    max-width: calc(100vw - 32px);
    font-size: 0.875rem;
  }
}

/* ============================================
   PRINT STYLES
   ============================================ */

@media print {
  .sb-sidebar,
  .sb-topbar,
  .btn,
  .pagination,
  .filter-section {
    display: none !important;
  }
  
  .sb-wrapper {
    margin-left: 0 !important;
  }
  
  .table-responsive {
    overflow: visible;
  }
}


